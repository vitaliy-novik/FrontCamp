{"version":3,"sources":["src/app.js","src/CategoryFilter.js","src/Enum.js","src/LanguageFilter.js","src/NewsApiClient.js","src/NewsFeed.js","src/SearchWidget.js","src/SourcesFilter.js","src/Utils.js"],"names":[],"mappings":"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","file":"compiled.js","sourcesContent":["import NewsFeed from './NewsFeed.js';\r\n\r\nwindow.onload = () => {\r\n    new NewsFeed().draw();\r\n};","export default class CategoryFilter {\r\n    constructor (parentId, onChanged, categories) {\r\n        this.parentId = parentId;\r\n        this.categories = categories;\r\n        this.onChanged = onChanged;\r\n    };\r\n\r\n    draw() {\r\n        const html = \r\n            `<span class=\"col s2\">Choose categories:</span>` + \r\n            this.categories.map(cat => `\r\n            <label class=\"col s2\">\r\n                <input type=\"checkbox\" value=\"${cat.id}\" class=\"filled-in\" checked=\"checked\" />\r\n                <span>${cat.name}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n\r\n        document.getElementById(this.parentId).innerHTML = html;\r\n    };\r\n}","const Enum = {\r\n    Default: {\r\n        Language: 'en'\r\n    },\r\n    Categories: [\r\n        {\r\n            id: 'business',\r\n            name: 'Business'\r\n        },\r\n        {\r\n            id: 'general',\r\n            name: 'General'\r\n        },\r\n        {\r\n            id: 'health',\r\n            name: 'Health'\r\n        },\r\n        {\r\n            id: 'science',\r\n            name: 'Science'\r\n        },\r\n        {\r\n            id: 'sports',\r\n            name: 'Sports'\r\n        },\r\n        {\r\n            id: 'technology',\r\n            name: 'Technology'\r\n        },\r\n        {\r\n            id: 'entertainment',\r\n            name: 'Entertainment'\r\n        }\r\n    ],\r\n    Languages: [\r\n        {\r\n            id: 'en',\r\n            name: 'English'\r\n        },\r\n        {\r\n            id: 'de',\r\n            name: 'Deutsch'\r\n        },        \r\n        {\r\n            id: 'fr',\r\n            name: 'French'\r\n        },\r\n        {\r\n            id: 'it',\r\n            name: 'Italian'\r\n        },\r\n        {\r\n            id: 'ru',\r\n            name: 'Русский'\r\n        }\r\n        // TODO add more\r\n    ],\r\n    Countries: [\r\n        // TODO\r\n    ]\r\n}\r\n\r\nexport default Enum;","export default class LanguageFilter {\r\n    constructor(parentId, onChange, languages, defaultLang) {\r\n        this.parentId = parentId;\r\n        this.onChange = onChange;\r\n        this.languages = languages;\r\n        this.defaultLang = defaultLang;\r\n    };\r\n\r\n    draw() {\r\n        const html = \r\n            `<span class=\"col s2\">Choose your language:</span>` + \r\n            this.languages.map(lang => `\r\n            <label class=\"col s1\">\r\n                <input name=\"language\" type=\"radio\" value=\"${lang.id}\" ${lang.id === this.defaultLang ? \"checked\" : \"\"} />\r\n                <span>${lang.name}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n\r\n        document.getElementById(this.parentId).innerHTML = html;\r\n\r\n        this.bindEventsListeners();\r\n    };\r\n\r\n    bindEventsListeners() {\r\n        document.getElementsByName('language').forEach(element => {\r\n            element.onchange = event => this.onChange(event.target.value);\r\n        });\r\n    };\r\n};","const apiKey = \"42550f2e240d4605a04069e84d56aaa2\";\r\nconst baseUrl = \"https://newsapi.org/\";\r\n\r\nexport default class NewsApiClient {\r\n    getSources ({countries, language, categories}, callback) {\r\n        const url = `${baseUrl}v2/sources?country=${countries.join(',')}&language=${language}&category=${categories.join(',')}`;\r\n        this.performGetRequest(url, json => callback(json.sources));\r\n    };\r\n\r\n    getHeadlines({sources, query}, callback) {\r\n        let sourcesParam = sources.map(s => s.id).join(',');\r\n        const url = `${baseUrl}v2/top-headlines?q=${query}&sources=${sourcesParam}`;\r\n        this.performGetRequest(url, json => callback(json.articles));\r\n    };\r\n\r\n    performGetRequest(url, callback) {\r\n        let myHeaders = new Headers();\r\n        myHeaders.append(\"X-Api-Key\", apiKey);\r\n\r\n        let options = { \r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            cache: 'no-cache' };\r\n\r\n        fetch(url, options)\r\n            .then(response => response.json())\r\n            .then(callback);\r\n    }\r\n};","import SearchWidget from './SearchWidget.js';\r\n\r\nexport default class NewsFeed {\r\n    constructor () {\r\n        this.searchWidget = new SearchWidget(this.renderNews.bind(this));\r\n    };\r\n\r\n    draw(news) {\r\n        this.searchWidget.draw();\r\n    };\r\n\r\n    renderNews(news) {\r\n        const html = news.map(n => `\r\n        <article class=\"row\">\r\n            <div class=\"col s3\">\r\n                <img width=\"100%\" src=\"${n.urlToImage}\" />\r\n            </div>\r\n            <div class=\"col s9\">\r\n                <h5>\r\n                    <a href=\"${n.url}\">${n.title}</a>\r\n                    </h3>\r\n                <h6>${n.title}</h4>\r\n                <p>${n.content}</p>\r\n                <i>${n.author}</i>\r\n            </div>\r\n        </article>`).join('');\r\n\r\n        document.getElementById(\"feed\").innerHTML = html;\r\n    };\r\n}","import CategoryFilter from './CategoryFilter.js';\r\nimport Enum from './Enum.js';\r\nimport LanguageFilter from './LanguageFilter.js';\r\nimport NewsClient from './NewsApiClient.js';\r\nimport SourcesFilter from './SourcesFilter.js';\r\nimport { Loading } from './Utils.js';\r\n\r\nexport default class SearchWidget {\r\n    constructor(callback) {\r\n        this.callback = callback;\r\n        this.newsClient = new NewsClient();\r\n        this.languageFilter = new LanguageFilter(\r\n            'languageFilter', this.onLanguageChanged.bind(this), Enum.Languages, Enum.Default.Language);\r\n        this.categoryFilter = new CategoryFilter(\r\n            'categoryFilter', this.onCategoryChanged, Enum.Categories);\r\n        this.sourcesFilter = new SourcesFilter('sourcesFilter');\r\n        \r\n        this.searchParameters = {\r\n            countries: [],\r\n            language: Enum.Default.Language,\r\n            categories: [],\r\n            sources: [],\r\n            query: ''\r\n        };\r\n    };\r\n\r\n    draw() {\r\n        document.getElementById(\"submitSearchButton\").onclick = this.searchClickHandler.bind(this);\r\n        this.languageFilter.draw();\r\n        this.categoryFilter.draw();\r\n        this.newsClient.getSources(\r\n            this.searchParameters, \r\n            this.onSourcesChange.bind(this));\r\n        Loading('sourcesFilter');\r\n    };\r\n\r\n    searchClickHandler () {\r\n        this.searchParameters.query = document.getElementById(\"query\").value;\r\n        this.newsClient.getHeadlines(\r\n            this.searchParameters, this.callback);\r\n    };\r\n\r\n    onLanguageChanged(language) {\r\n        this.searchParameters.language = language;\r\n        this.newsClient.getSources(\r\n            this.searchParameters, \r\n            this.onSourcesChange.bind(this));\r\n        Loading('sourcesFilter');\r\n    }\r\n\r\n    onSourcesChange(sources) {\r\n        this.searchParameters.sources = sources;\r\n        this.sourcesFilter.draw(sources);\r\n        this.newsClient.getHeadlines(\r\n            this.searchParameters, this.callback);\r\n    }\r\n}","import { Truncate } from './Utils.js';\r\n\r\nexport default class SourcesFilter {\r\n    constructor(parentId) {\r\n        this.parentId = parentId;\r\n    };\r\n\r\n    draw(sources) {\r\n        const html = \r\n            `<span class=\"col s2\">Choose sources:</span>` + \r\n            sources.map(source => `\r\n            <label class=\"col s2\">\r\n                <input type=\"checkbox\" value=\"${source.id}\" class=\"filled-in\" checked=\"checked\" />\r\n                <span>${Truncate(source.name, 2)}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n        \r\n        document.getElementById(this.parentId).innerHTML = html;\r\n    };\r\n}","export function Loading(elementId) {\r\n    document.getElementById(elementId).innerHTML = `\r\n        <div class=\"progress\">\r\n            <div class=\"indeterminate\"></div>\r\n        </div>`;\r\n};\r\n\r\nexport function Truncate(text, wordsCount) {\r\n    let words = text.split(\" \");\r\n    if (wordsCount >= words.length){\r\n        return text;\r\n    }\r\n\r\n    let result = \"\";\r\n    for (let i = 0; i < wordsCount; i++) {\r\n        result += words[i] + \" \";\r\n    }\r\n\r\n    if (wordsCount < words.length) {\r\n        result += \"…\";\r\n    }\r\n\r\n    return result;\r\n}"]}