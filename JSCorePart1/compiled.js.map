{"version":3,"sources":["src/app.js","src/CategoryFilter.js","src/Enum.js","src/LanguageFilter.js","src/NewsApiClient.js","src/NewsFeed.js","src/SearchWidget.js","src/SourcesFilter.js","src/Utils.js"],"names":[],"mappings":"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","file":"compiled.js","sourcesContent":["import NewsFeed from './NewsFeed.js';\r\n\r\nwindow.onload = () => {\r\n    new NewsFeed().draw();\r\n};","export default class CategoryFilter {\r\n    constructor (parentId, onChanged, categories) {\r\n        this.parentId = parentId;\r\n        this.categories = categories;\r\n        this.onChanged = onChanged;\r\n    };\r\n\r\n    draw() {\r\n        const html = \r\n            `<span class=\"col s2\">Choose categories:</span>` + \r\n            this.categories.map(cat => `\r\n            <label class=\"col s2\">\r\n                <input type=\"checkbox\" value=\"${cat.id}\" class=\"filled-in\" checked=\"checked\" />\r\n                <span>${cat.name}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n\r\n        document.getElementById(this.parentId).innerHTML = html;\r\n    };\r\n}","const Enum = {\r\n    Default: {\r\n        Language: 'en'\r\n    },\r\n    Categories: [\r\n        {\r\n            id: 'business',\r\n            name: 'Business'\r\n        },\r\n        {\r\n            id: 'general',\r\n            name: 'General'\r\n        },\r\n        {\r\n            id: 'health',\r\n            name: 'Health'\r\n        },\r\n        {\r\n            id: 'science',\r\n            name: 'Science'\r\n        },\r\n        {\r\n            id: 'sports',\r\n            name: 'Sports'\r\n        },\r\n        {\r\n            id: 'technology',\r\n            name: 'Technology'\r\n        },\r\n        {\r\n            id: 'entertainment',\r\n            name: 'Entertainment'\r\n        }\r\n    ],\r\n    Languages: [\r\n        {\r\n            id: 'en',\r\n            name: 'English'\r\n        },\r\n        {\r\n            id: 'de',\r\n            name: 'Deutsch'\r\n        },        \r\n        {\r\n            id: 'fr',\r\n            name: 'French'\r\n        },\r\n        {\r\n            id: 'it',\r\n            name: 'Italian'\r\n        },\r\n        {\r\n            id: 'ru',\r\n            name: 'Русский'\r\n        }\r\n        // TODO add more\r\n    ],\r\n    Countries: [\r\n        // TODO\r\n    ]\r\n}\r\n\r\nexport default Enum;","export default class LanguageFilter {\r\n    constructor(parentId, onChange, languages, defaultLang) {\r\n        this.parentId = parentId;\r\n        this.onChange = onChange;\r\n        this.languages = languages;\r\n        this.defaultLang = defaultLang;\r\n    };\r\n\r\n    draw() {\r\n        const html = \r\n            `<span class=\"col s2\">Choose your language:</span>` + \r\n            this.languages.map(lang => `\r\n            <label class=\"col s1\">\r\n                <input name=\"language\" type=\"radio\" value=\"${lang.id}\" ${lang.id === this.defaultLang ? \"checked\" : \"\"} />\r\n                <span>${lang.name}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n\r\n        document.getElementById(this.parentId).innerHTML = html;\r\n\r\n        this.bindEventsListeners();\r\n    };\r\n\r\n    bindEventsListeners() {\r\n        document.getElementsByName('language').forEach(element => {\r\n            element.onchange = event => this.onChange(event.target.value);\r\n        });\r\n    };\r\n};","const apiKey = \"42550f2e240d4605a04069e84d56aaa2\";\r\nconst baseUrl = \"https://newsapi.org/\";\r\n\r\nexport default class NewsApiClient {\r\n    getSources ({countries, language, categories}, callback) {\r\n        const url = `${baseUrl}v2/sources?country=${countries.join(',')}&language=${language}&category=${categories.join(',')}`;\r\n        this.performGetRequest(url, json => callback(json.sources));\r\n    };\r\n\r\n    getHeadlines({sources, query}, callback) {\r\n        let sourcesParam = sources.map(s => s.id).join(',');\r\n        const url = `${baseUrl}v2/top-headlines?q=${query}&sources=${sourcesParam}`;\r\n        this.performGetRequest(url, json => callback(json.articles));\r\n    };\r\n\r\n    performGetRequest(url, callback) {\r\n        let myHeaders = new Headers();\r\n        myHeaders.append(\"X-Api-Key\", apiKey);\r\n\r\n        let options = { \r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            cache: 'no-cache' };\r\n\r\n        fetch(url, options)\r\n            .then(response => response.json())\r\n            .then(callback);\r\n    }\r\n};","import SearchWidget from './SearchWidget.js';\r\n\r\nexport default class NewsFeed {\r\n    constructor () {\r\n        this.searchWidget = new SearchWidget(this.renderNews.bind(this));\r\n    };\r\n\r\n    draw(news) {\r\n        this.searchWidget.draw();\r\n    };\r\n\r\n    renderNews(news) {\r\n        const html = news.map(n => `\r\n        <article class=\"row\">\r\n            <div class=\"col s3\">\r\n                <img width=\"100%\" src=\"${n.urlToImage}\" />\r\n            </div>\r\n            <div class=\"col s9\">\r\n                <h5>\r\n                    <a href=\"${n.url}\">${n.title}</a>\r\n                    </h3>\r\n                <h6>${n.title}</h4>\r\n                <p>${n.content}</p>\r\n                <i>${n.author}</i>\r\n            </div>\r\n        </article>`).join('');\r\n\r\n        document.getElementById(\"feed\").innerHTML = html;\r\n    };\r\n}","import CategoryFilter from './CategoryFilter.js';\r\nimport Enum from './Enum.js';\r\nimport LanguageFilter from './LanguageFilter.js';\r\nimport NewsClient from './NewsApiClient.js';\r\nimport SourcesFilter from './SourcesFilter.js';\r\nimport { Loading } from './Utils.js';\r\n\r\nexport default class SearchWidget {\r\n    constructor(callback) {\r\n        this.callback = callback;\r\n        this.newsClient = new NewsClient();\r\n        this.languageFilter = new LanguageFilter(\r\n            'languageFilter', this.onLanguageChanged.bind(this), Enum.Languages, Enum.Default.Language);\r\n        this.categoryFilter = new CategoryFilter(\r\n            'categoryFilter', this.onCategoryChanged, Enum.Categories);\r\n        this.sourcesFilter = new SourcesFilter('sourcesFilter');\r\n        \r\n        this.searchParameters = {\r\n            countries: [],\r\n            language: Enum.Default.Language,\r\n            categories: [],\r\n            sources: [],\r\n            query: ''\r\n        };\r\n    };\r\n\r\n    draw() {\r\n        document.getElementById(\"submitSearchButton\").onclick = this.searchClickHandler.bind(this);\r\n        this.languageFilter.draw();\r\n        this.categoryFilter.draw();\r\n        this.newsClient.getSources(\r\n            this.searchParameters, \r\n            this.onSourcesChange.bind(this));\r\n        Loading('sourcesFilter');\r\n    };\r\n\r\n    searchClickHandler () {\r\n        this.searchParameters.query = document.getElementById(\"query\").value;\r\n        this.newsClient.getHeadlines(\r\n            this.searchParameters, this.callback);\r\n    };\r\n\r\n    onLanguageChanged(language) {\r\n        this.searchParameters.language = language;\r\n        this.newsClient.getSources(\r\n            this.searchParameters, \r\n            this.onSourcesChange.bind(this));\r\n        Loading('sourcesFilter');\r\n    }\r\n\r\n    onSourcesChange(sources) {\r\n        this.searchParameters.sources = sources;\r\n        this.sourcesFilter.draw(sources);\r\n        this.newsClient.getHeadlines(\r\n            this.searchParameters, this.callback);\r\n    }\r\n}","import { Truncate } from './Utils.js';\r\n\r\nexport default class SourcesFilter {\r\n    constructor(parentId) {\r\n        this.parentId = parentId;\r\n    };\r\n\r\n    draw(sources) {\r\n        const html = \r\n            `<span class=\"col s2\">Choose sources:</span>` + \r\n            sources.map(source => `\r\n            <label class=\"col s2\">\r\n                <input type=\"checkbox\" value=\"${source.id}\" class=\"filled-in\" checked=\"checked\" />\r\n                <span>${Truncate(source.name, 2)}</span>\r\n            </label>`)\r\n            .join(\"\");\r\n        \r\n        document.getElementById(this.parentId).innerHTML = html;\r\n    };\r\n}","export function Loading(elementId) {\r\n    document.getElementById(elementId).innerHTML = `\r\n        <div class=\"progress\">\r\n            <div class=\"indeterminate\"></div>\r\n        </div>`;\r\n};\r\n\r\nexport function Truncate(text, wordsCount) {\r\n    let words = text.split(\" \");\r\n    if (wordsCount >= words.length){\r\n        return text;\r\n    }\r\n\r\n    let result = \"\";\r\n    for (let i = 0; i < wordsCount; i++) {\r\n        result += words[i] + \" \";\r\n    }\r\n\r\n    if (wordsCount < words.length) {\r\n        result += \"…\";\r\n    }\r\n\r\n    return result;\r\n}"]}